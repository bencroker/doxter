var Doxter=function(){};Doxter.prototype.init=function(e,t){return this.id=e,this.editor={},this.config=this.configure(t||{}),this},Doxter.prototype.createReferenceTags=function(e,t){for(var r="",o,n=0;n<t.length;n++)r=r+"{"+(o=e.toLowerCase()+":"+t[n].id)+"}";return r},Doxter.prototype.replaceSelection=function(e){this.editor.codemirror.replaceSelection(e),this.editor.codemirror.focus()},Doxter.prototype.createSelectionModal=function(e,t,r){var o=this;Craft.createElementSelectorModal("craft\\elements\\"+e,{multiSelect:!!r,criteria:t||{},onSelect:function(t){var r=o.createReferenceTags(e,t);r&&o.replaceSelection(r)}})},Doxter.prototype.selectEntry=function(){var e=this;return function(){e.createSelectionModal("Entry")}},Doxter.prototype.selectAsset=function(){var e=this;return function(){e.createSelectionModal("Asset")}},Doxter.prototype.selectUser=function(){var e=this;return function(){e.createSelectionModal("User")}},Doxter.prototype.selectTag=function(){var e=this;return function(){e.createSelectionModal("Tag")}},Doxter.prototype.fullScreen=function(e){var t=$("#main-container");$(window).on({keydown:function(e){27===e.keyCode&&t.removeClass("fullscreen")}}),t.toggleClass("fullscreen"),e.toggleFullScreen()},Doxter.prototype.getToolbar=function(e){var t=this;if(!e.showToolbar)return[];var r=[{name:"bold",title:"Bold (Ctrl+B",action:SimpleMDE.toggleBold,className:"fa fa-bold"},{name:"italic",action:SimpleMDE.toggleItalic,className:"fa fa-italic",title:"Italic (Ctrl+I)"},{name:"quote",action:SimpleMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Quote (Ctrl+')"},{name:"ordered-list",action:SimpleMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List (Ctrl+Alt+L)"},{name:"unordered-list",action:SimpleMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Generic List (Ctrl+L)"},{name:"link",action:SimpleMDE.drawLink,className:"fa fa-link",title:"Create Link (Ctrl+K)"},{name:"image",action:SimpleMDE.drawImage,className:"fa fa-picture-o",title:"Insert Image (Ctrl+Alt+I)"},{name:"doxter-users",action:t.selectUser(),className:"fa fa-users doxter-primary-icon",title:"User Reference (Ctrl+Alt+1)"},{name:"doxter-entries",action:t.selectEntry(),className:"fa fa-newspaper-o doxter-primary-icon",title:"Entry Reference (Ctrl+Alt+2)"},{name:"doxter-assets",action:t.selectAsset(),className:"fa fa-picture-o doxter-primary-icon",title:"Asset Reference (Ctrl+Alt+3)"},{name:"doxter-tags",action:t.selectTag(),className:"fa fa-tags doxter-primary-icon",title:"Tag Reference (Ctrl+Alt+4)"}];return this.getEnabledToolbarIcons(r,e.enabledToolbarIconNames)},Doxter.prototype.getEnabledToolbarIcons=function(e,t){if(e.length===t.length)return e;for(var r=[],o={},n=0;n<e.length;n++)o=e[n],-1!==t.indexOf(o.name)&&r.push(o);return r},Doxter.prototype.configure=function(e){var t=this;return{element:document.getElementById(t.id),status:!1,toolbarTips:!0,toolbarGuideIcon:!1,autofocus:!1,lineWrapping:!!e.enableLineWrapping,indentWithTabs:!!e.indentWithTabs,tabSize:Number(e.tabSize),forceSync:!0,spellChecker:!!e.enableSpellChecker,toolbar:t.getToolbar(e)}},Doxter.prototype.render=function(){this.editor=new SimpleMDE(this.config);var e=this;Garnish.$win.on("resize",(function(){e.editor.codemirror.refresh()}))};
//# sourceMappingURL=doxter.js.map